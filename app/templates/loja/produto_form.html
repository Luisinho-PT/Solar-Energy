{% extends "base.html" %}
{% load static %}
{% block title %}Adicionar Produto{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/loja.css' %}">

<div class="loja-container" style="max-width: 760px;">

    <h1 style="margin-bottom:12px;">➕ Adicionar Novo Produto</h1>
    <p style="color:var(--muted); margin-bottom:20px;">
        Preencha os dados abaixo para cadastrar um novo item no catálogo solar.
    </p>

    <form method="post" enctype="multipart/form-data" class="produto-form">
        {% csrf_token %}

        <!-- Nome -->
        <label class="form-label">Nome do Produto</label>
        {{ form.nome }}

        <!-- Descrição -->
        <label class="form-label">Descrição</label>
        {{ form.descricao }}

        <!-- Preço -->
        <label class="form-label">Preço</label>
        {{ form.preco }}

        <!-- Estoque -->
        <label class="form-label">Estoque disponível</label>
        {{ form.estoque }}

        <!-- Categoria -->
        <label class="form-label">Categoria</label>
        {{ form.categoria }}

        <!-- Imagem -->
        <label class="form-label">Imagem do Produto</label>
        {{ form.imagem }}

        <div id="previewBox" style="margin-top:20px; display:none;">
            <h4>Prévia:</h4>
            <img id="imagePreview" src="" style="max-width:200px; border-radius:10px;">
        </div>

        <button class="btn-buy" type="submit" style="margin-top:18px; width:100%;">
            Salvar Produto
        </button>
    </form>
</div>

<script>
const inputImg = document.querySelector("input[type='file']");
const previewBox = document.getElementById("previewBox");
const previewImg = document.getElementById("imagePreview");

if (inputImg) {
    inputImg.addEventListener("change", function() {
        const file = this.files[0];
        if (file) {
            previewImg.src = URL.createObjectURL(file);
            previewBox.style.display = "block";
        }
    });
}
</script>

{% endblock %}
