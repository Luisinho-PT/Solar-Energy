{% extends "base.html" %}
{% load static %}

{% block title %}Finalizar Compra{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/checkout.css' %}">
{% endblock %}

{% block content %}

<div class="checkout-container">

    <h1 class="checkout-title">üßæ Finalizar Compra</h1>

    {% if error %}
        <div class="checkout-error">{{ error }}</div>
    {% endif %}

    <!-- RESUMO DO PEDIDO -->
    <div class="checkout-card">
        <h2>Resumo da Compra</h2>

        <p class="checkout-total">
            Total a pagar:
            <strong>R$ {{ total }}</strong>
        </p>
    </div>

    <!-- FORMUL√ÅRIO -->
    <form method="POST" class="checkout-form">
        {% csrf_token %}

        <!-- QUEM EST√Å COMPRANDO -->
        <div class="checkout-card">
            <h2>Informa√ß√µes do Comprador</h2>

            <label for="tipo_cliente">Cliente</label>
            <select name="tipo_cliente" id="tipo_cliente" required>
                <option value="">Selecione...</option>
                <option value="PF">Pessoa F√≠sica (CPF)</option>
                <option value="PJ">Pessoa Jur√≠dica (CNPJ)</option>
            </select>

            <div id="pf-box" class="hidden">
                <label>CPF</label>
                <input type="text" name="cpf" id="cpf" placeholder="000.000.000-00">
                <small>O CPF deve estar cadastrado no sistema.</small>
            </div>

            <div id="pj-box" class="hidden">
                <label>CNPJ</label>
                <input type="text" name="cnpj" id="cnpj" placeholder="00.000.000/0000-00">
                <small>O CNPJ deve estar cadastrado no sistema.</small>
            </div>
        </div>

        <!-- PAGAMENTO -->
        <div class="checkout-card">
            <h2>Pagamento</h2>

            <label>N√∫mero do Cart√£o</label>
            <input type="text" id="card_number" name="card_number" maxlength="19" placeholder="0000 0000 0000 0000" required>

            <label>Nome no Cart√£o</label>
            <input type="text" id="card_name" name="card_name" required>

            <div class="checkout-row">
                <div class="checkout-col">
                    <label>Validade</label>
                    <input type="text" id="validade" name="validade" placeholder="MM/AA" maxlength="5" required>
                </div>

                <div class="checkout-col">
                    <label>CVV</label>
                    <input type="text" id="cvv" name="cvv" maxlength="4" required>
                </div>
            </div>
        </div>

        <!-- BOT√ÉO -->
        <button type="submit" class="checkout-btn">
            Finalizar Compra
        </button>
    </form>

</div>

<script src="{% static 'js/checkout.js' %}"></script>

{% endblock %}
